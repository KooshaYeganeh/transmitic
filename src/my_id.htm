<html>

<head>
    <title>My ID</title>
    <style>
        @import url(style.css);
    </style>
    <script src="global_transmitic.js"></script>
    <script>

        let publicID = "";

        document.$("button#copy-id").onclick = function () {
            Clipboard.write({ text: publicID });
            document.$("span#copy-success").content("&nbsp;(copied)");
        }

        function setPublicID() {
            publicID = Window.this.xcall('get_public_id_string');
            //publicID = new Date().toLocaleTimeString();
            document.$("span#public-id").content(publicID);
            return publicID;
        }

        document.$("button#create-new-id").onclick = function () {
            let response = Window.this.xcall('create_new_id');
            //let response = [0, "none"];
            if (response[0] == 0) {
                setPublicID();
                setMsgBoxSuccess("Your new Public ID is <strong>" + publicID + "</strong>");
            }
            else {
                setMsgBoxError("Failed to create new Public ID.");
            }
        }

        document.ready = function () {
            setPublicID();
        }

    </script>
</head>

<body>
    <div class="main-body">
        <div id="msg-box"></div>

        <h1>My ID</h1>
        <h2>My Public ID</h2>
        Share your Public ID with anyone you want to share with.
        <br>
        <p>
            Your Public ID is: <span id="public-id" class="highlight"></span>&nbsp;<button #copy-id
                style="font-size:9pt;">Copy</button><span #copy-success></span>
        </p>

        <h2>Create New ID</h2>
        You will not be able to share with anyone until they update to your new ID.
        <br>
        <i>Your current ID will no longer work.</i>
        <br><br>
        <button id="create-new-id">Create New ID</button>
        <!--TODO modal are you sure?-->

    </div>
</body>

</html>