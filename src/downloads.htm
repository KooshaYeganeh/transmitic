<html>
	<head>
		<title>Test</title>
		<style>
		
		@import url(style.css);


        </style>
		<script>

			let downloads_in_progress = [
				{
					owner: 'My Friend',
					percent: 90,
					path: 'C:\\hello\\world1',
				},
				{
					owner: 'My Friend1',
					percent: 50,
					path: 'C:\\hello\\world2',
				}
			];

			let downloads_invalid = [
				{
					owner: 'My FriendN',
					percent: 10,
					path: 'C:\\hello\\world3',
				},
				{
					owner: 'My Friend1Q',
					percent: 5,
					path: 'C:\\hello\\world4',
				}
			];

			let downloads_offline = [
				{
					owner: 'My FriendO',
					percent: 2,
					path: 'C:\\hello\\world6',
				},
				{
					owner: 'My Friend1Y',
					percent: 54,
					path: 'C:\\hello\\world8',
				}
			];

			let downloads_finished = [
				{
					owner: 'My FriendOFFF',
					path: 'C:\\hello\\world77',
				},
				{
					owner: 'My Friend1YYYYY',
					path: 'C:\\hello\\world8999',
				}
			];

			let all_downloads = {
				//in_progress: Window.this.xcall('get_downloads_in_progress'),
				in_progress: downloads_in_progress,
				invalid: downloads_invalid,
				offline: downloads_offline,
				finished: downloads_finished,
			};


			function MyDownloads() {
				return <div>
					{ all_downloads.in_progress.map((d) => <SingleDownloadInProgress owner={d.owner} percent={d.percent} path={d.path} />) } 
					{ all_downloads.invalid.map((d) => <SingleDownloadInvalid owner={d.owner} percent={d.percent} path={d.path} />) } 
					{ all_downloads.offline.map((d) => <SingleDownloadOffline owner={d.owner} percent={d.percent} path={d.path} />) } 
					{ all_downloads.finished.map((d) => <SingleDownloadFinished owner={d.owner} percent={d.percent} path={d.path} />) } 
					</div>;
			}

			
			
			class SingleDownloadInProgress {
				constructor(props,kids, parent) { 
					this.props = props;
					this.download_class = "download-active";
				}

				render(props,kids) {
					return <div><div class={"download " + this.download_class}>
						<div class="download-inner">
							{props.owner} | {props.percent}% | Downloading now...
							<br /><br />
							{props.path}

							<br /><br />
							<button class="cancel-download">Cancel</button>
							<button class="pause-all">Pause Downloads from My Friend</button>
						</div>
					</div>
					<hr />
					</div>;
				}

				["on click at button.cancel-download"](evt, button) { 
					Window.this.xcall('fake_click', this.props.owner);
				}
			}



			function SingleDownloadInProgressOld(props) {
				return <div><div class="download download-active">
					<div class="download-inner">
						{props.owner} | {props.percent}% | Downloading now...
						<br /><br />
						{props.path}

						<br /><br />
						<button class="cancel-download">Cancel</button>
						<button class="pause-all">Pause Downloads from My Friend</button>
					</div>
				</div>
				<hr />
				</div>;
			}

			function SingleDownloadInvalid(props) {
				return <div><div class="download download-invalid">
					<div class="download-inner">
						{props.owner} | {props.percent}% | Invalid or no longer shared with you
						<br /><br />
						{props.path}

						<br /><br />
						<button class="cancel-download">Cancel</button>
						<button class="pause-all">Pause Downloads from My Friend</button>
					</div>
				</div>
				<hr />
				</div>;
			}

			function SingleDownloadOffline(props) {
				return <div><div class="download download-offline">
					<div class="download-inner">
						{props.owner} | {props.percent}% | User currently offline
						<br /><br />
						{props.path}

						<br /><br />
						<button class="cancel-download">Cancel</button>
						<button class="pause-all">Pause Downloads from My Friend</button>
					</div>
				</div>
				<hr />
				</div>;
			}

			function SingleDownloadFinished(props) {
				return <div><div class="download download-finished">
					<div class="download-inner">
						{props.owner} | {props.percent}% | Download Finished
						<br /><br />
						{props.path}

						<br /><br />
						<button class="cancel-download">Open</button>
					</div>
				</div>
				<hr />
				</div>;
			}
			
			//document.body.content(<MyDownloads />);
			document.$("div#mydownloads").content(<MyDownloads />);
			//document.$("div#mydownloads").content(Window.this.xcall('get_local_ip'));


		</script>
	</head>
	<body>
	
	<div class="main-body">
		<h1>Downloads</h1>
		    <section style="border-spacing:50dip;">
      <div class="my-downloads">
        <h2>My Downloads</h2>
        <div class="menu-bar">
          <button #opendownloads>Open Downloads</button>
          <button #cancelalldownloads>Cancel All</button>
          <button #pausealldownloads>Pause All</button>
          <button #resumealldownloads>Resume All</button>
          <button #clearfinished>Clear Finished</button>
          <button #clearinvalid>Clear Invalid</button>
        </div>
        <hr>
        <div #mydownloads>
          <div class="download download-active">
			<div class="download-inner">
				My Friend | 25% | Downloading now...
				<br><br>
				C:\shared_file.txt

				<br><br>
				<button class="cancel-download">Cancel</button>
				<button class="pause-all">Pause Downloads from My Friend</button>
			</div>
          </div>
          <hr>
			<div class="download download-active">
			<div class="download-inner">
				My Friend | 25% | Downloading now...
				<br><br>
				C:\shared_file.txt

				<br><br>
				<button class="cancel-download">Cancel</button>
				<button class="pause-all">Pause Downloads from My Friend</button>
			</div>
          </div>
          <hr>
          <div class="download download-invalid">
			  <div class="download-inner">
				My Friend | 25% | Invalid or no longer shared with you
				<br><br>
				C:\shared_file.txt

				<br><br>
				<button class="cancel-download">Cancel</button>
				<button class="pause-all">Pause Downloads from My Friend</button>
			  </div>
		  </div>
          <hr>
		  <div class="download download-offline">
			  <div class="download-inner">
				My Friend | 25% | User currently offline
				<br><br>
				C:\shared_file.txt

				<br><br>
				<button class="cancel-download">Cancel</button>
				<button class="pause-all">Pause Downloads from My Friend</button>
			  </div>
		  </div>
          <hr>
		  <div class="download download-finished">
			  <div class="download-inner">
				My Friend | 100% | Download finished
				<br><br>
				C:\shared_file.txt

				<br><br>
				<button class="cancel-download">Cancel</button>
				<button class="pause-all">Pause Downloads from My Friend</button>
			  </div>
		  </div>
          <hr>
        </div>
      </div>

      <div class="from-me">
        <h2>Users Downloading From Me</h2>
        <hr>
        <div #downloadingfromme>
          <div class="download">
		  <div class="download-inner">
            My Friend | 25% | Downloading now...
            <br><br>
            C:\shared_file.txt
			</div>
          </div>
          <hr>
          <div class="download">
		  <div class="download-inner">
            My Friend | 25% | Downloading now...
            <br><br>
            C:\shared_file.txt
		</div>
          </div>
          <hr>
        </div>
      </div>

    </section>
	</div>
	</body>
</html>