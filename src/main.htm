<html>
  <head>
    <title>Transmitic In Development Alpha</title>
    <style>

      html {
        background-color:rgb(255, 255, 255);
        color: #000;
        behavior: htmlarea;
        context-menu: selector(menu#for-htmlarea);
      }

      html:rtl {
        mapping: left-to-right(background);
      }

      a { color: blue; }
      code { font-weight: bold; }

      #msg_box {
            padding: 1em 1em 1em 1em;
            width: 100%;
            background-color: rgb(85, 255, 79);
            color: #000;
            margin-bottom: 1em;
            display: none;
        }

    </style>

<menu.context #for-htmlarea style="background-color: #f0f0f0; border: 1px solid #a0a0a0;">
  <li command="edit:copy"	style="foreground-image:url(sciter:copy.png)"><label>Copy</label><span class="accesskey">Ctrl+C</span></li>
  <hr/>
  <li command="edit:selectall"><label>Select All</label><span class="accesskey">Ctrl+A</span></li>
</menu>

    <script type="text/tiscript">
    
      // Window icon
      var bytes_string = view.get_icon();
      var bytes = Bytes.fromString(bytes_string, "utf-8");
      var image = Image.fromBytes(bytes);
      view.windowIcon = image;

      // -- Open urls in browser
      self.on("click", "a[href^=http]", function(evt) {
        var href = this.attributes["href"];
        Sciter.launch(href); // will open the url in default browser
        return true; // consume the event
      });
      //

      $(button#load_about).on("click", function() {
        stdout.println("load about");
        var page_html = view.get_page_about();
        $(frame#content).load(page_html, "example://about.htm");
      });

      $(button#load_downloads).on("click", function() {
        load_downloads();
      });

      function load_downloads() {
        stdout.println("load downloads");
        var page_html = view.get_page_downloads();
        $(frame#content).load(page_html, "example://downloads.htm");
      }

      $(button#load_my_sharing).on("click", function() {
        stdout.println("load my sharing");
        var page_html = view.get_page_my_sharing();
        $(frame#content).load(page_html, "example://my_sharing.htm");
      });

      $(button#load_users).on("click", function() {
        load_users();
      });

      function load_users() {
        stdout.println("load users");
        var page_html = view.get_page_users();
        $(frame#content).load(page_html, "example://users.htm");
      }

      function load_shared_with_me() {
        var page_html = view.get_page_shared_with_me();
        $(frame#content).load(page_html, "example://shared_with_me.htm");
        $(#users).html = view.get_users();
      }

      function load_welcome() {
        var page_html = view.get_page_welcome();
        $(frame#content).load(page_html, "example://welcome.htm");
      }

      $(button#load_my_id).on("click", function() {
        var page_html = view.get_page_my_id();
        $(frame#content).load(page_html, "example://my_id.htm");
      });

      $(button#load_shared_with_me).on("click", function() {
        stdout.println("load shared with me");
        load_shared_with_me();
      });

      if (view.get_is_first_start()) {
        load_welcome();
      } else {
        load_downloads();
      }


      

      // -- RIGHT CLICK CONTEXT MENU
      function getSelectedText() {
        return $(div.selectable).selection.text;
      }
      
      function getSelectedHTML() {
        return $(div.selectable).selection.html;
      }
      
      function hasSelection() {
        return $(div.selectable).selection.type;
      }
    
      $(div.selectable).on("click","li#selected-text", function() { view.msgbox(#information,getSelectedText().htmlEscape()); })
                       .on("click","li#selected-html", function() { view.msgbox(#information,getSelectedHTML().htmlEscape()); })
                       .on("keydown", function(evt) { return true; /*supress key handling in selectable */ } );

    </script>
  </head>
<body>

  <button #load_downloads>Downloads</button>
  <button #load_shared_with_me>Shared With Me</button>
  <button #load_my_sharing>My Sharing</button>
  <button #load_users>Users</button>
  <button #load_my_id>My ID</button>
  <button #load_about>About</button>

  <frame#content>

  </frame>

</body>
</html>
